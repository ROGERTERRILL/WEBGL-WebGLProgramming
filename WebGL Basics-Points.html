<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebGL Basics Points</title>

    <script id="shader-vs" type="x-shader/x-vertex">
        void main(void) {
           gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
           gl_PointSize = 10.0;
        }
    </script>

    <script id="shader-fs" type="x-shader/x-fragment">
        precision mediump float;
        void main(void) {
            gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
        }
    </script>

    <script type="text/javascript">
        let gl;
        let shaderProgram;
        // ===============================================================
        function init(){
            initGL();
            createShaders();
            createPoint();
        }

        // ================================================================
        function initGL() {
            let canvas = document.getElementById('webgl-canvas');
            gl = canvas.getContext('webgl');
            gl.canvasWidth = canvas.width;
            gl.canvasHeight = canvas.height;
        }

        // ==============================================================
        function createShaders() {
            let vertexShaderText = document.getElementById('shader-vs').textContent;
            let vertexShader = createCompiledShader(gl, vertexShaderText, gl.VERTEX_SHADER);
            let fragmentShaderText = document.getElementById('shader-fs').textContent;
            let fragmentShader = createCompiledShader(gl, fragmentShaderText, gl.FRAGMENT_SHADER);

            // Create an empty gl "program" which will be composed of compiled shaders
            shaderProgram = gl.createProgram();

            // Attach both shaders
            gl.attachShader(shaderProgram, vertexShader);
            gl.attachShader(shaderProgram, fragmentShader);

            // linkProgram() method links a given WebGLProgram, completing the process of preparing the GPU code for the program's fragment and vertex shaders.
            gl.linkProgram(shaderProgram);

            // useProgram() method of the WebGL API sets the specified WebGLProgram as part of the current rendering state.
            gl.useProgram(shaderProgram);
        }

        function createPoint() {
            gl.clearColor(0.0, 0.0, 0.0, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.drawArrays(gl.POINTS, 0, 1);
        }

        // ===============================================================
        function createCompiledShader(gl, shaderText, shaderType) {
            // Either gl.VERTEX_SHADER or gl.FRAGMENT_SHADER for shaderType
            let shader = gl.createShader(shaderType);

            // Sets the source code of a WebGLShader.
            gl.shaderSource(shader, shaderText);

            // Compiles a GLSL shader into binary data so that it can be used by a WebGLProgram.
            gl.compileShader(shader);

            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                alert(gl.getShaderInfoLog(shader));
                console.log(gl.getShaderInfoLog(shader));
                return null;
            }
            return shader;
        }
    </script>
</head>
<body onload="init();">
<canvas id="webgl-canvas" style="border: none;" width="768" height="512"></canvas>
</body>
</html>